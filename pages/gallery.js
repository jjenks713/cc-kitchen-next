import MainHeader from '../components/MainHeader/MainHeader'
import GalImageList from '../components/ImageList/ImageList'
import Head from 'next/head';
import { getInfoCards, getHeaders, getGalImages } from '../lib/api'
import { motion } from 'framer-motion';
import { useState } from 'react';


export default function Home({ preview, headers, galImages }) {
    const [tags, setTags] = useState("gallery-images")
    const [title, setTitle] = useState("All")

    const page = 2

    const navTabs = [
        {
            name: "All",
            value: "gallery-images"
        },
        {
            name: "Charlees Dogs",
            value: "dogs"
        },
        {
            name: "Savory",
            value: "savory"
        },
        {
            name: "Sweet",
            value: "desserts"
        },
    ]

    function setData(value, name) {
        setTags(value)
        setTitle(name)
    }

    return (
        <div>
            <Head>
                <title>Charlees Comfort Kitchen</title>
                <meta name="description" content="Generated by create next app" />
                <link rel="icon" href={"/images/img/logo2.png"} />
            </Head>
            <main>
                <MainHeader header={headers} page={page} />
                <div className='flex justify-center flex-wrap flex-row-reverse'>
                    <div className='flex flex-col justify-center'>
                        <div className='flex flex-nowrap bg-gradient-to-t from-white to-black justify-center pt-10 pb-2 rounded-xl'>
                            {navTabs.map(tabs => (
                                <>
                                    <motion.button
                                        whileHover={{ borderBottom: "black", backgroundColor: "rgb(55 65 81)", color: "white" }}
                                        className='mx-4 text-black font-bold rounded '
                                        value={tabs.value}
                                        name={tabs.name}
                                        onClick={(e) => setData(e.target.value, e.target.name)}>
                                        {tabs.name}
                                    </motion.button>

                                </>
                            ))}
                        </div>
                        <div className='text-white text-6xl text-center pt-10'>
                            <motion.div
                                initial={{ opacity: 0, y: 100 }}
                                animate={{ opacity: 1, y: 0 }}
                                transition={{
                                    duration: .01,
                                    type: "spring",
                                    stiffness: 100
                                }}
                                key={title}
                            >
                                {title}
                            </motion.div>
                        </div>

                    </div>

                    <GalImageList galImages={galImages} tags={tags} />
                </div>
            </main>
        </div>
    )
}

export async function getStaticProps({ preview = true }) {
    const infoCards = (await getInfoCards(preview)) ?? []
    const headers = (await getHeaders(preview)) ?? []
    const galImages = (await getGalImages(preview)) ?? []

    return {
        props: { preview, infoCards, headers, galImages },
    }
}
